# helm repo add prometheus-community https://prometheus-community.github.io/helm-charts
# helm repo update

# helm show values prometheus-community/prometheus
# helm install prometheus prometheus-community/prometheus

# helm show values prometheus-community/kube-prometheus-stack

# kubectl create namespace monitoring
# helm upgrade --install prometheus -f values.yaml prometheus-community/kube-prometheus-stack -n monitoring
# helm uninstall prometheus -n monitoring
# k delete service/prometheus-kube-prometheus-kubelet -n kube-system

grafana:
  adminPassword: secret
  persistence:
    enabled: true

prometheus:
  persistence:
    enabled: true

alertmanager:
  enabled: true

kubeEtcd:
  enabled: false

kubeControllerManager:
  enabled: false

kubeScheduler:
  enabled: false

thanosService:
  enabled: true
  persistence:
    enabled: true


# metadata:
#   name: traefik
#   namespace: kube-system
#   labels:
#     app: traefik
#   annotations:
#     prometheus.io/scrape: "true"
#     prometheus.io/path: /metrics
#     prometheus.io/port: "80"

grafana:
  adminPassword: secret
  deploymentStrategy:
    type: Recreate
  persistence:
    enabled: true
    type: pvc
    storageClassName: default
    accessModes:
    - ReadWriteOnce
    size: 1Gi
    finalizers:
    - kubernetes.io/pvc-protection
  # grafana.ini:
  #   server:
  #     domain: xxx
  #     root_url: xxx
  #   auth.google:
  #     enabled: true
  #     client_id: xxx
  #     client_secret: xxx
  #     scopes: https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email
  #     auth_url: https://accounts.google.com/o/oauth2/auth
  #     token_url: https://accounts.google.com/o/oauth2/token
  #     allowed_domains: gmail.com
  #     allow_sign_up: false
  #   paths:
  #     data: /var/lib/grafana/data
  #     logs: /var/log/grafana
  #     plugins: /var/lib/grafana/plugins
  #     provisioning: /etc/grafana/provisioning
  #   analytics:
  #     check_for_updates: true
  #   log:
  #     mode: console
  #   grafana_net:
  #     url: https://grafana.net


prometheus:
  persistence:
    enabled: true
  prometheusSpec:
    storageSpec:
      volumeClaimTemplate:
        spec:
          storageClassName: manual
          accessModes: ["ReadWriteOnce"]
          resources:
            requests:
              storage: 1Gi

alertmanager:
  enabled: false

kubeEtcd:
  enabled: false

kubeControllerManager:
  enabled: false

kubeScheduler:
  enabled: false


# (Please remember to change ${kube-prometheus-stack.fullname} and ${namespace}. Not just copy and paste!)
# thanosService:
#   enabled: true
# thanosServiceMonitor:
#   enabled: false
#   interval: ""

